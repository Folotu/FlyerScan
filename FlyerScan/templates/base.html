<!DOCTYPE html>
<html>
  <title>{% block title %}{% endblock %}</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <link
    rel="stylesheet"
    href="{{ url_for('static', filename = '/css/base.css') }}"
  />
  <link
    rel="stylesheet"
    href="{{ url_for('static', filename = '/css/login.css') }}"
  />
  <link
    rel="stylesheet"
    href="{{ url_for('static', filename = '/css/landing.css') }}"
  />
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
    crossorigin="anonymous"
  />
  <link rel="manifest" href="../static/manifest.json" />

  <link rel="stylesheet" href="../static/css/index.css" />

  <link rel="stylesheet" href="../static/css/account.css" />

  <!-- Icons -->

  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.15.1/devicon.min.css"
  />

  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.15.1/devicon.min.css"
  />
  <link
    href="https://fonts.googleapis.com/icon?family=Material+Icons"
    rel="stylesheet"
  />

  <!-- Icons -->

  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.15.1/devicon.min.css"
  />

  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.15.1/devicon.min.css"
  />

  <script src="https://kit.fontawesome.com/b909904038.js" crossorigin="anonymous"></script>

  <!--  flash alerts  -->

  {% with messages = get_flashed_messages(with_categories=true) %} {% if
  messages %} {% for category, message in messages %} {% if category == 'error'
  %}
  <div class="alert alert-danger alter-dismissable fade show" role="alert">
    {{ message }}
    <button type="button" class="close" data-dismiss="alert">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  {% elif category == 'success' %}
  <div class="alert alert-success alter-dismissable fade show" role="alert">
    {{ message }}
    <button type="button" class="close" data-dismiss="alert">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  {% elif category == 'warning' %}
  <div class="alert alert-warning alter-dismissable fade show" role="alert">
    {{ message }}
    <button type="button" class="close" data-dismiss="alert">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  {% endif %} {% endfor %} {% endif %} {% endwith %}

  <head>
    {% block header %} 
      <script>
        const cameraBtn = document.getElementById('camera-btn');
        console.log(cameraBtn);
        cameraBtn.addEventListener('click', async () => {
          try {
            const stream = await navigator.mediaDevices.getUserMedia({ video: true });
            const video = document.createElement('video');
            video.srcObject = stream;
            video.play();
            document.body.appendChild(video);
          } catch (error) {
            console.error('Failed to access the camera:', error);
          }
        });
        </script>
    {% endblock %}
  </head>

  <body>
    <div id="overlay3" class="hidden">
      <div class="loader3"></div>
  </div>
    {% block body %}{% endblock %}
  </body>


  <nav class="nav">
    {% block nav%}

    <a href="/home" class="nav__link">
      <i class="material-icons nav__icon">home</i>
      <span class="nav__text">Home</span>
    </a>
   <!--<a href="/camera" class="nav__link" > -->  
      
        <label for="file-upload2" class="nav__link2">
        <form
          id="file-upload-form2"
          method="POST"
          enctype="multipart/form-data"
          action="{{ url_for('views.upload_file') }}"
          style="display: none">
        <input 
          type="file" 
          name="file"
          id="file-upload2" 
          style="display:none"
          onchange="document.getElementById('overlay3').classList.remove('hidden');
                    document.getElementById('file-upload-form2').submit();">
        </form>
        <i class="material-icons nav__icon">photo_camera</i>
        <span class="nav__text">Scan</span>
      </label>

    <a href="/history" class="nav__link">
      <i class="material-icons nav__icon">history</i>
      <span class="nav__text">History</span>
    </a>
    <a href="/account" class="nav__link">
      <i class="material-icons nav__icon">person</i>
      <span class="nav__text">Account</span>
    </a>

    {% endblock %}
  </nav>

  <script
    type="text/javascript"
    src="{{ url_for('static', filename='/js/index.js') }}"
  ></script>

  <script
    type="text/javascript"
    src="{{ url_for('static', filename='/js/serviceWorker.js') }}"
  ></script>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

  <script
    src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"
  ></script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"></script>
</html>
